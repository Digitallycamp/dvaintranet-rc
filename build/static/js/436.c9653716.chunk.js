"use strict";(self.webpackChunkdvaintranet=self.webpackChunkdvaintranet||[]).push([[436],{4436:(e,t,s)=>{s.r(t),s.d(t,{default:()=>h});var l=s(2555),a=s(5043),n=s(4411),r=s(9954),d=s(1533),o=s(7059),c=s(5472),i=s(2112),u=s(579);function x(){const[e,t]=(0,a.useState)(""),[s,l]=(0,a.useState)(""),[n,o]=(0,a.useState)(""),[c,i]=(0,a.useState)(""),[x,m]=(0,a.useState)([""]),[h,p]=(0,a.useState)(""),[b,j]=(0,a.useState)(0),[v,f]=(0,a.useState)(""),[N,g]=(0,a.useState)(""),[y,C]=(0,a.useState)([{subject:"",content:[""]}]),[w,S]=(0,a.useState)(!1);return(0,u.jsxs)("form",{className:"bg-white p-6 rounded-md border border-slate-100 space-y-4 mt-6  w-full max-w-[512px]",onSubmit:async t=>{t.preventDefault();const l={title:e,description:s,intro:n,Prerequisites:c,Includes:x.filter((e=>e)),"career path":h,projects:b,Duration:v,"skill level":N,syllabus:y.filter((e=>e.subject&&e.content.some((e=>e))))};try{S(!0),console.log("Course Data:",l),alert("Course created successfully!"),await(0,d.ue)(l)}catch(a){console.log(a)}finally{S(!1)}},children:[(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("label",{children:"Title"}),(0,u.jsx)("input",{type:"text",placeholder:"Enter title",value:e,onChange:e=>t(e.target.value),className:"px-3 h-8 border border-slate-100 rounded-md outline-none"})]}),(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("label",{children:"Description"}),(0,u.jsx)("textarea",{placeholder:"Enter description",value:s,onChange:e=>l(e.target.value),className:"px-3 border border-slate-100 rounded-md outline-none"})]}),(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("label",{children:"Introduction"}),(0,u.jsx)("textarea",{placeholder:"Enter introduction",value:n,onChange:e=>o(e.target.value),className:"px-3 border border-slate-100 rounded-md outline-none"})]}),(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("label",{children:"Prerequisites"}),(0,u.jsx)("input",{type:"text",placeholder:"Enter prerequisites",value:c,onChange:e=>i(e.target.value),className:"px-3 h-8 border border-slate-100 rounded-md outline-none"})]}),(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("label",{children:"Includes"}),x.map(((e,t)=>(0,u.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,u.jsx)("input",{type:"text",placeholder:"Enter include",value:e,onChange:e=>((e,t)=>{const s=[...x];s[e]=t,m(s)})(t,e.target.value),className:"px-3 h-8 border border-slate-100 rounded-md outline-none"}),(0,u.jsx)("button",{type:"button",onClick:()=>(e=>{m(x.filter(((t,s)=>s!==e)))})(t),className:"text-red-500",children:"Remove"})]},t))),(0,u.jsx)("button",{type:"button",onClick:()=>{m([...x,""])},className:"px-3 h-8 bg-slate-500 text-white font-bold rounded-md",children:"Add Include"})]}),(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("label",{children:"Syllabus"}),y.map(((e,t)=>(0,u.jsxs)("div",{className:"border p-4 rounded-md",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,u.jsx)("input",{type:"text",placeholder:"Enter subject",value:e.subject,onChange:e=>((e,t)=>{const s=[...y];s[e].subject=t,C(s)})(t,e.target.value),className:"px-3 h-8 border border-slate-100 rounded-md outline-none"}),(0,u.jsx)("button",{type:"button",onClick:()=>{return e=t,void C(y.filter(((t,s)=>s!==e)));var e},className:"text-red-500",children:"Remove Subject"})]}),(0,u.jsxs)("div",{className:"ml-4",children:[e.content.map(((e,s)=>(0,u.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,u.jsx)("input",{type:"text",placeholder:"Enter content",value:e,onChange:e=>((e,t,s)=>{const l=[...y];l[e].content[t]=s,C(l)})(t,s,e.target.value),className:"px-3 h-8 border border-slate-100 rounded-md outline-none"}),(0,u.jsx)("button",{type:"button",onClick:()=>((e,t)=>{const s=[...y];s[e].content=s[e].content.filter(((e,s)=>s!==t)),C(s)})(t,s),className:"text-red-500",children:"Remove"})]},s))),(0,u.jsx)("button",{type:"button",onClick:()=>(e=>{const t=[...y];t[e].content.push(""),C(t)})(t),className:"text-blue-500",children:"Add Content"})]})]},t))),(0,u.jsx)("button",{type:"button",onClick:()=>{C([...y,{subject:"",content:[""]}])},className:"px-3 h-8 bg-slate-500 text-white font-bold rounded-md",children:"Add Subject"})]}),(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("label",{children:"Career Path"}),(0,u.jsx)("input",{type:"text",placeholder:"Enter career path Eg: Front end development",value:h,onChange:e=>p(e.target.value),className:"px-3 h-8 border border-slate-100 rounded-md outline-none"})]}),(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("label",{children:"Number of Projects"}),(0,u.jsx)("input",{type:"number",placeholder:"Enter number of projects",value:b,onChange:e=>j(Number(e.target.value)),className:"px-3 h-8 border border-slate-100 rounded-md outline-none"})]}),(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("label",{children:"Duration"}),(0,u.jsx)("input",{type:"text",placeholder:"Enter duration EG: 6 Weeks",value:v,onChange:e=>f(e.target.value),className:"px-3 h-8 border border-slate-100 rounded-md outline-none"})]}),(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("label",{children:"Skill Level"}),(0,u.jsx)("input",{type:"text",placeholder:"Enter skill level EG: Beginner",value:N,onChange:e=>g(e.target.value),className:"px-3 h-8 border border-slate-100 rounded-md outline-none"})]}),(0,u.jsx)("div",{className:"pt-10 flex justify-end",children:(0,u.jsx)("button",{disabled:w,type:"submit",className:"px-3 h-8 bg-slate-950 text-white font-bold rounded-md",children:w?(0,u.jsx)(r.BM,{width:24,height:24}):"Create Course"})})]})}function m(e){let{courseId:t,courseTitle:s}=e;const{appDocData:n}=(0,i.I)(),[o,x]=(0,a.useState)(""),[m,h]=(0,a.useState)(t),[p,b]=(0,a.useState)(""),[j,v]=(0,a.useState)([{id:Date.now(),url:""}]),[f,N]=(0,a.useState)([{id:Date.now(),url:""}]),[g,y]=(0,a.useState)(""),[C,w]=(0,a.useState)(""),[S,D]=(0,a.useState)({}),[k,A]=(0,a.useState)(!1);return(0,u.jsxs)("form",{className:"bg-white p-6 rounded-md border border-slate-100 mt-6 w-full max-w-[512px] space-y-6",onSubmit:async e=>{e.preventDefault();const t={};if(o||(t.batch="Batch cannot be empty"),m||(t.courseID="Course ID cannot be empty"),p||(t.title="Title cannot be empty"),j.some((e=>!e.url))&&(t.videoUrls="All video URLs must be filled"),f.some((e=>!e.url))&&(t.resources="All resource URLs must be filled"),g||(t.description="Description cannot be empty"),C||(t.assessment="Assessment cannot be empty"),Object.keys(t).length>0)return D(t);const s={assessment:{completed:!1,assessment:C},batchID:o,courseID:m,completed:!1,createdAt:c.Dc.now(),description:g,resources:f.map((e=>e.url)).filter((e=>e)),title:p,updatedAt:c.Dc.now(),videoURL:j.map((e=>e.url)).filter((e=>e))};try{A(!0),D({});const e=Date.now();await(0,d._q)(s);const t=Date.now()-e;t<3e3&&await new Promise((e=>setTimeout(e,3e3-t)))}catch(S){console.log(S)}finally{A(!1)}},children:[(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("label",{className:"text-xs",children:"Select Batch"}),(0,u.jsxs)("select",{className:"px-3 h-8 bg-white border  border-slate-100 rounded-md outline-none",value:o,onChange:e=>x(e.target.value),children:[(0,u.jsx)("option",{value:"",children:"--Select Batch--"}),n.batches.map(((e,t)=>(0,u.jsx)("option",{value:e,children:e},t)))]}),S.batch&&(0,u.jsx)("span",{className:"text-red-500 text-sm",children:null===S||void 0===S?void 0:S.batch})]}),(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("label",{className:"text-xs",children:"Course ID"}),(0,u.jsx)("select",{className:"px-3 h-8 bg-white border  border-slate-100 rounded-md outline-none",value:m,onChange:e=>h(e.target.value),children:(0,u.jsx)("option",{value:m,children:m})}),S.courseID&&(0,u.jsx)("span",{className:"text-red-500 text-sm",children:null===S||void 0===S?void 0:S.courseID})]}),(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("label",{className:"text-xs",children:"Title"}),(0,u.jsx)("input",{type:"text",value:p,onChange:e=>b(e.target.value),placeholder:"Enter lesson title",className:"px-3 h-8 border border-slate-100 rounded-md outline-none"}),S.title&&(0,u.jsx)("span",{className:"text-red-500 text-sm",children:null===S||void 0===S?void 0:S.title})]}),(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("label",{className:"text-xs",children:"Video URLs"}),j.map((e=>(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex items-end space-x-2 border rounded-md p-4",children:[(0,u.jsx)("input",{type:"url",value:e.url,onChange:t=>{return s=e.id,a=t.target.value,void v((e=>e.map((e=>e.id===s?(0,l.A)((0,l.A)({},e),{},{url:a}):e))));var s,a},placeholder:"Enter video URL",className:"px-3 h-8 border w-full border-slate-100 rounded-md outline-none"}),(0,u.jsx)("button",{type:"button",onClick:()=>{return t=e.id,void v((e=>e.filter((e=>e.id!==t))));var t},className:"px-3 h-8 bg-slate-500 text-white font-bold rounded-md",children:"Remove"})]}),S.videoUrls&&(0,u.jsx)("p",{className:"text-red-500 text-sm",children:null===S||void 0===S?void 0:S.videoUrls})]},e.id))),(0,u.jsx)("button",{type:"button",onClick:()=>{v([...j,{id:Date.now(),url:""}])},className:"px-3 h-8 bg-slate-950 text-white font-bold rounded-md",children:"Add Video URL"})]}),(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("label",{className:"text-xs",children:"Resources"}),f.map((e=>(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"flex items-end space-x-2 border rounded-md p-4",children:[(0,u.jsx)("input",{type:"url",value:e.url,onChange:t=>{return s=e.id,a=t.target.value,void N((e=>e.map((e=>e.id===s?(0,l.A)((0,l.A)({},e),{},{url:a}):e))));var s,a},placeholder:"Enter resource URL",className:"px-3 h-8 border w-full border-slate-100 rounded-md outline-none"}),(0,u.jsx)("button",{type:"button",onClick:()=>{return t=e.id,void N((e=>e.filter((e=>e.id!==t))));var t},className:"px-3 h-8 bg-slate-500 text-white font-bold rounded-md",children:"Remove"})]}),S.resources&&(0,u.jsx)("p",{className:"text-red-500 text-sm",children:null===S||void 0===S?void 0:S.resources})]},e.id))),(0,u.jsx)("button",{type:"button",onClick:()=>{N([...f,{id:Date.now(),url:""}])},className:"px-3 h-8 bg-slate-950 text-white font-bold rounded-md",children:"Add Resource"})]}),(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("label",{className:"text-xs",children:"Description"}),(0,u.jsx)("textarea",{value:g,onChange:e=>y(e.target.value),placeholder:"Enter lesson description",className:"px-3 border border-slate-100 rounded-md outline-none"}),S.description&&(0,u.jsx)("span",{className:"text-red-500 text-sm",children:null===S||void 0===S?void 0:S.description})]}),(0,u.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,u.jsx)("label",{className:"text-sm font-medium",children:"Assessment (Optional)"}),(0,u.jsx)("textarea",{name:"assessment",value:C,onChange:e=>w(e.target.value),placeholder:"Enter assessment details",className:"px-3 py-2 h-24 border border-slate-200 rounded-md outline-none focus:border-slate-400 transition-colors resize-y"}),S.assessment&&(0,u.jsx)("span",{className:"text-red-500 text-sm",children:null===S||void 0===S?void 0:S.assessment})]}),(0,u.jsx)("div",{className:"pt-10 flex justify-end",children:(0,u.jsx)("button",{disabled:k,type:"submit",className:"px-3 h-8 bg-slate-950 text-white text-center  font-bold rounded-md ",children:k?(0,u.jsx)(r.BM,{width:24,height:24}):"Add Lesson"})})]},t)}const h=function(){const[e,t]=(0,a.useState)(!1),[s,c]=(0,a.useState)(!1),[i,h]=(0,a.useState)([]),[p,b]=(0,a.useState)(!1),[j,v]=(0,a.useState)(""),[f,N]=(0,a.useState)(),[g,y]=(0,a.useState)();return console.log(f),(0,a.useEffect)((()=>{!async function(){b(!0);try{const e=await(0,d.NJ)();h(e)}catch(j){j&&v("Unable to get all courses, contact support")}finally{b(!1)}}()}),[]),console.log(i),p?(0,u.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,u.jsx)(r.BM,{width:24,height:24,color:"#080808"})}):j?(0,u.jsx)("p",{children:j}):(0,u.jsxs)("div",{children:[(0,u.jsx)("h1",{className:"text-2xl font-bold",children:"Courses"}),(0,u.jsx)("div",{className:"my-10",children:(0,u.jsx)("button",{onClick:()=>t(!e),className:"px-3 h-8 bg-slate-950 text-white font-bold rounded-md ",children:"Create course"})}),(0,u.jsx)("div",{children:(0,u.jsx)("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 gap-5",children:i.map((e=>(0,u.jsx)(a.Fragment,{children:(0,u.jsx)(o.A,(0,l.A)((0,l.A)({},e),{},{handleClick:()=>{console.log("clicked edit lesson"),N(e.id),y(e.title),c(!s)}}))},e.id)))})}),e&&(0,u.jsx)(n.A,{title:"Create Course",handleModalClick:()=>t(!e),children:(0,u.jsx)(x,{})}),s&&(0,u.jsx)(n.A,{title:"Add Lesson",handleModalClick:()=>{c(!s)},children:(0,u.jsx)(m,{courseId:f,courseTitle:g})})]})}}}]);
//# sourceMappingURL=436.c9653716.chunk.js.map